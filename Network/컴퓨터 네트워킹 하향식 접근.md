# 1. 목차
- [1. 목차](#1-목차)
- [2. 애플리케이션 계층](#2-애플리케이션-계층)
  - [2.1. 네트워크 애플리케이션을 만든다는 것](#21-네트워크-애플리케이션을-만든다는-것)
  - [2.2. 네트워크 애플리케이션 구조](#22-네트워크-애플리케이션-구조)
  - [2.3. 프로세스와 소켓](#23-프로세스와-소켓)
  - [2.4. 애플리케이션 계층 프로토콜](#24-애플리케이션-계층-프로토콜)
  - [2.5. 전송 계층이 제공 가능한 서비스(요구사항 관점)](#25-전송-계층이-제공-가능한-서비스요구사항-관점)
    - [2.5.1. TCP](#251-tcp)
    - [2.5.2. UDP](#252-udp)
  - [2.6. 체크리스트](#26-체크리스트)


---

# 2. 애플리케이션 계층
## 2.1. 네트워크 애플리케이션을 만든다는 것
- TCP/UDP를 새로 구현하는 것이 아니다. 이미 존재하는 전송 계층 서비스를 소켓 API를 사용하여 앱으로 생성하는것이다.
- 내가 "개발자라면 내가 만든 애플리케이션이 전송 계층에 어떤 서비스를 요구하는가?를" 고려하여야 한다.
## 2.2. 네트워크 애플리케이션 구조
- 클라이언트-서버: 항상 켜진 서버, 클라이언트가 접속하는것. 관리가 용이하지만 서버 확장비용이 높다. -> 대형 데이터센터를 생각하면됨.
- p2p: 각 호스트가 클라이언트이자 동시에 서버의 역할을 한다. 자원 확장성이 뛰어나지만, 관리 분산, NAT/보안/가변 업타임 이슈가 존재한다.
-> 토렌트
## 2.3. 프로세스와 소켓
- 통신의 주체는 호스트가 아닌 프로세스이다.
- 소켓: 프로세스가 네트워크로 메시지를 주고 받는 문(interface), 전송 계층 서비스에 대한 API.
- 주소 지정: 목적지 IP주소 + 포트번호
- 서버는 보통 well-known port로 수신을 대기한다.
## 2.4. 애플리케이션 계층 프로토콜
- 서로 다른 호스트가 협업하기위해서는 프로토콜이 필요하다.
- 프로토콜이 정의 하는 것
    - 메시지 타입(요청/응답)
    - 메시지 형식(필드, 순서, 인코딩)
    - 의미(각 필드가 뜻하는 바)
    - 절차(언제 무엇을 보내고 받을지)
- 공개 프로토콜 vs 독자 프로토콜
## 2.5. 전송 계층이 제공 가능한 서비스(요구사항 관점)
- 신뢰성(데이터 손실/중복없이)
- 지연/타이밍(최대 지연 보장)
- 처리량(최소 대역폭 보장)
- 보안(기밀성, 무결성, 인증)
### 2.5.1. TCP
- 연결 지향(3-way handshake), 신뢰적 전송, 흐름 및 혼잡 제어, 순서 보장
- 지연/처리량 보장은 존재하지않는다. 최대한 공정하게 전송하는것이 목표.
- 보안은 TLS(SSL)을 덧씌워 TCP위에서 제공한다.
### 2.5.2. UDP
- 비연결, 최선형 노력, 헤더 가벼움.
- 앱이 자체적으로 손실복구/재전송/적응형 전송
- 지연 민감 및 약간의 손실 허용 -> 실시간 미디어에 적합하다.
## 2.6. 체크리스트
1. 내 앱의 신뢰성/지연/처리량/보안 요구 정의
2. C/S vs P2P 구조 선택(확장성·운영복잡도 균형)
3. 애플리케이션 프로토콜 설계(메시지 포맷/흐름)
4. 소켓 API 사용(TCP/UDP 선택, 포트 바인딩/연결/타임아웃 등)
5. 필요하면 TLS/DTLS로 보안 추가
6. NAT/방화벽 통과 전략(STUN/TURN/ICE 등, P2P라면 특히)