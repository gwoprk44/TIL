---
aliases:
  - JPA
tags:
  - Resource
  - Dev
  - JPA
---



>[!note] 패러다임 불일치를 해소하기 위한 수단으로 객체와 RDB 사이의 중간 매개체

### 엔티티 매니저: 영속성 객체 가상 관리

• 엔티티 매니저는 영속성 객체와 RDB 사이에서 객체의 갱신과 조회 작업을 중재한다. 각각의 작업에 맞는 EntityManager의 메소드를 호출하면 이에 대응하는 SQL이 생성되어 RDB에 반영된다. 단, 수정작업에 대응되는 EntityManger의 메소드는 존재하지 않는다. EntityManger는 객체의 변경사항을 자동감지하여 UPDATE 쿼리를 생성하기 때문에 별도의 수정 메소드가 필요하지 않다.

### JPQL: 영속성 객체 대상 조회

• JPQL은 객체 중심으로 RDB에 질의하기 위한 매개체다. 영속성 객체 대상 조회 시 엔티티 매니저는 createQuery 메소드의 인자로 JPQL을 넘긴다. JPA는 JPQL에 기반해서 SQL을 생성한다. 단, 기본키만으로 영속성 객체 자체를 조회할 때 엔티티 매니저는 JPQL을 사용하지 않고 find 메소드를 호출하여 직접 SQL을 생성하고 이를 RDB에 반영시킨다.

### 추가 질문

• 엔티티 매니저를 쓰레드 간 공유했을 때 발생할 수 있는 부작용에는 어떤 것이 있는가?

**데이터 불일치**: 한 쓰레드가 엔티티를 변경하고 다른 쓰레드가 이를 읽을 때, 변경 사항이 아직 커밋되지 않았거나 부분적으로만 반영된 상태일 수 있습니다. 이는 데이터 불일치 문제로 이어질 수 있습니다.

• PQL은 객체지향과 관계형 모델 간 어떤 이슈를 해결하기 위해 도입되었는가?